- name: 'default'
  manifest_s3_buckets:
    - name: 'origin'
      role: 'source'
      bucket_name: 'gardenlinux-github-releases'
      aws_cfg_name: 'gardenlinux'
  buildresult_s3_buckets:
    - name: 'origin'
      role: 'source'
      bucket_name: 'gardenlinux-github-releases'
      aws_cfg_name: 'gardenlinux'
    - name: 'replica-cn'
      role: 'replica'
      bucket_name: 'gardenlinux'
      aws_cfg_name: 'gardenlinux-cn'
      platforms: ['aws']
  ocm:
    ocm_repository: europe-docker.pkg.dev/gardener-project/releases
  targets:
    - platform: 'ali'
      oss_bucket_name: 'gardenlinux-community'
      aliyun_region: 'eu-central-1'
      aliyun_cfg_name: 'gardenlinux'
    - platform: 'aws'
      aws_cfgs:
        - aws_cfg_name: 'gardenlinux'
          buildresult_bucket: 'origin'
        - aws_cfg_name: 'gardenlinux-cn'
          buildresult_bucket: 'replica-cn'
      image_tags:
        static_tags:
          sec-by-def-public-image-exception: enabled
    - platform: 'gcp'
      gcp_cfg_name: 'gardenlinux'
      gcp_bucket_name: 'gardenlinux-images'
    - platform: 'azure'
      gallery_cfg_name: 'gardenlinux-community-gallery'
      storage_account_cfg_name: 'gardenlinux-community-gallery'
      service_principal_cfg_name: 'gardenlinux'
      marketplace_cfg:
        offer_id: 'gardenlinux'
        publisher_id: 'sap'
        plan_id: 'greatest'
        notification_emails: ['thomas.buchner@sap.com','dirk.marwinski@sap.com','andre.russ@sap.com']
      publish_to_marketplace: true
      publish_to_community_galleries: true
    - platform: 'openstack'
      environment_cfg_name: 'gardenlinux'
      image_properties:
        hypervisor_type: vmware
        vmware_ostype: debian10_64Guest
        hw_vif_model: vmxnet3
        hw_disk_bus: scsi
        vmware_adaptertype: paraVirtual
        vmware_disktype: streamOptimized
    - platform: 'openstackbaremetal'
      environment_cfg_name: 'gardenlinux'
      suffix: 'baremetal'
      image_properties:
        hypervisor_type: baremetal
        os_distro: debian10_64Guest
        img_config_drive: mandatory
- name: 'gardener-integration-test'
  manifest_s3_buckets:
    - name: 'origin'
      role: 'source'
      bucket_name: 'gardenlinux-github-releases'
      aws_cfg_name: 'gardenlinux-integration-test'
    - name: 'tests'
      role: 'target'
      bucket_name: 'gardenlinux-test-import'
      aws_cfg_name: 'gardenlinux-integration-test'
  buildresult_s3_buckets:
    - name: 'origin'
      role: 'source'
      bucket_name: 'gardenlinux-github-releases'
      aws_cfg_name: 'gardenlinux-integration-test'
  ocm:
    ocm_repository: europe-docker.pkg.dev/gardener-project/snapshots
    overwrite_component_descriptor: true
  targets:
    - platform: 'aws'
      aws_cfgs:
        - aws_cfg_name: 'gardenlinux-integration-test'
          buildresult_bucket: 'origin'
          copy_regions: ['eu-west-1']
      image_tags:
        include_gardenlinux_version: true
        include_gardenlinux_committish: true
        static_tags:
          sec-by-def-public-image-exception: enabled
          purpose: test
          test-type: gardener-integration
    - platform: 'openstack'
      environment_cfg_name: 'gardenlinux'
      suffix: 'int-test'
      copy_regions: ['eu-nl-1']
      image_properties:
        hypervisor_type: vmware
        vmware_ostype: debian10_64Guest
        hw_vif_model: vmxnet3
        hw_disk_bus: scsi
        vmware_adaptertype: paraVirtual
        vmware_disktype: streamOptimized
